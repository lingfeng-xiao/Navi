# 个人财务管理系统 - 测试用例模板与规范

## 1. 测试用例模板概述

本文档提供了个人财务管理系统的标准测试用例模板和编写规范，旨在确保测试用例的一致性、完整性和可执行性，提高测试效率和质量。

## 2. 测试用例命名规范

### 2.1 测试用例ID格式

```
[模块代码]-[测试类型]-[序号]
```

**示例**：
- DASH-FUNC-001: 仪表盘功能测试用例1
- EXP-UNIT-005: 支出管理单元测试用例5
- DEBT-COMP-003: 债务管理组件测试用例3

### 2.2 模块代码定义

| 模块代码 | 模块名称 |
|---------|----------|
| DASH | 仪表盘 |
| EXP | 支出管理 |
| INC | 收入管理 |
| DEBT | 债务管理 |
| SET | 设置 |
| NAV | 导航和通用组件 |
| DATA | 数据管理 |
| UI | 用户界面 |

### 2.3 测试类型代码

| 测试类型代码 | 测试类型 |
|------------|----------|
| FUNC | 功能测试 |
| UNIT | 单元测试 |
| COMP | 组件测试 |
| E2E | 端到端测试 |
| PERF | 性能测试 |
| COMPAT | 兼容性测试 |
| SEC | 安全性测试 |
| ACC | 可访问性测试 |

## 3. 功能测试用例模板

### 3.1 功能测试用例结构

```markdown
## 测试用例ID: [ID]

### 基本信息
- **标题**: [简洁明了的测试标题]
- **模块**: [所属模块]
- **优先级**: [高/中/低]
- **测试级别**: [P0/P1/P2/P3]
- **创建日期**: [YYYY-MM-DD]
- **最后更新**: [YYYY-MM-DD]
- **测试人员**: [姓名]

### 测试目的
[描述测试用例的目的和要验证的功能点]

### 前置条件
- [列出执行此测试用例前必须满足的条件]
- [例如：用户已登录、特定数据已准备等]

### 测试数据
- [输入数据]
- [预期数据]
- [测试环境配置]

### 测试步骤
1. [步骤1详细描述]
2. [步骤2详细描述]
3. ...

### 预期结果
- [列出执行测试步骤后预期的系统行为和结果]
- [包括界面显示、数据变化、系统响应等]

### 实际结果
- [执行测试后记录的实际结果]

### 测试状态
- [通过/失败/阻塞/未执行]

### 备注
- [其他需要说明的信息]
- [如测试中发现的问题、特殊情况等]
```

### 3.2 功能测试用例示例

```markdown
## 测试用例ID: EXP-FUNC-001

### 基本信息
- **标题**: 添加新支出记录
- **模块**: 支出管理
- **优先级**: 高
- **测试级别**: P0
- **创建日期**: 2023-07-01
- **最后更新**: 2023-07-01
- **测试人员**: 测试审计员

### 测试目的
验证用户能够成功添加新的支出记录，并验证数据正确保存和显示。

### 前置条件
- 系统已启动并运行正常
- 用户已进入支出管理页面

### 测试数据
- **输入数据**:
  - 金额: 500
  - 分类: 餐饮
  - 日期: 2023-07-01
  - 描述: 午餐
  - 标签: 日常

### 测试步骤
1. 点击"添加支出"按钮
2. 在支出表单中输入测试数据
3. 点击"保存"按钮

### 预期结果
1. 支出表单成功提交
2. 新添加的支出记录显示在支出列表顶部
3. 支出列表总数增加1
4. 仪表盘上的支出统计数据更新

### 实际结果
- [执行测试后填写]

### 测试状态
- [执行测试后填写]

### 备注
- 需验证金额格式正确性校验
```

## 4. 单元测试用例模板

### 4.1 单元测试用例结构

```markdown
## 测试用例ID: [ID]

### 基本信息
- **标题**: [测试函数/组件的标题]
- **模块**: [所属模块]
- **优先级**: [高/中/低]
- **创建日期**: [YYYY-MM-DD]
- **最后更新**: [YYYY-MM-DD]
- **测试人员**: [姓名]

### 测试对象
- **函数/组件名称**: [完整名称]
- **文件路径**: [相对路径]

### 测试目的
[描述测试的具体目标和要验证的功能点]

### 测试数据
- **输入参数**: [参数值]
- **预期返回值**: [期望结果]

### 测试代码
```javascript
// 示例测试代码
import { describe, it, expect } from 'vitest'
import { functionName } from '@/path/to/function'

describe('functionName', () => {
  it('should return correct result when given valid input', () => {
    const result = functionName(input)
    expect(result).toBe(expectedOutput)
  })
})
```

### 测试场景
1. **正常场景**: [描述]
2. **边界场景**: [描述]
3. **异常场景**: [描述]

### 测试状态
- [通过/失败/未执行]

### 备注
- [其他需要说明的信息]
```

### 4.2 单元测试用例示例

```markdown
## 测试用例ID: DATA-UNIT-001

### 基本信息
- **标题**: 计算总支出函数测试
- **模块**: 数据管理
- **优先级**: 高
- **创建日期**: 2023-07-01
- **最后更新**: 2023-07-01
- **测试人员**: 测试审计员

### 测试对象
- **函数/组件名称**: totalExpenses
- **文件路径**: src/stores/finance.ts

### 测试目的
验证totalExpenses计算属性能够正确计算所有支出的总和。

### 测试数据
- **输入参数**: [支出数组]
- **预期返回值**: 3600

### 测试代码
```javascript
import { describe, it, expect } from 'vitest'
import { useFinanceStore } from '@/stores/finance'
import { setActivePinia, createPinia } from 'pinia'

describe('Finance Store - totalExpenses', () => {
  beforeEach(() => {
    setActivePinia(createPinia())
  })

  it('should calculate total expenses correctly', () => {
    const store = useFinanceStore()
    store.expenses = [
      { id: '1', amount: 2500, category: '住房', date: '2023-06-01', description: '房租', tags: ['必要'] },
      { id: '2', amount: 800, category: '餐饮', date: '2023-06-05', description: '超市购物', tags: ['日常'] },
      { id: '3', amount: 300, category: '交通', date: '2023-06-10', description: '地铁月卡', tags: ['必要'] }
    ]
    
    expect(store.totalExpenses).toBe(3600)
  })

  it('should return 0 when there are no expenses', () => {
    const store = useFinanceStore()
    store.expenses = []
    
    expect(store.totalExpenses).toBe(0)
  })
})
```

### 测试场景
1. **正常场景**: 包含多个支出记录时计算总和
2. **边界场景**: 空数组时返回0
3. **异常场景**: 负数支出时的计算（应过滤或报错）

### 测试状态
- [执行测试后填写]

### 备注
- 需验证负数支出的处理逻辑
```

## 5. 组件测试用例模板

### 5.1 组件测试用例结构

```markdown
## 测试用例ID: [ID]

### 基本信息
- **标题**: [组件测试标题]
- **模块**: [所属模块]
- **优先级**: [高/中/低]
- **创建日期**: [YYYY-MM-DD]
- **最后更新**: [YYYY-MM-DD]
- **测试人员**: [姓名]

### 测试对象
- **组件名称**: [组件名称]
- **文件路径**: [相对路径]

### 测试目的
[描述测试组件的目的和要验证的功能点]

### 测试配置
- **props**: [测试用props]
- **事件**: [测试用事件]
- **依赖**: [组件依赖]

### 测试代码
```javascript
// 示例组件测试代码
import { describe, it, expect, mount } from '@vue/test-utils'
import ComponentName from '@/components/path/to/ComponentName.vue'

describe('ComponentName', () => {
  it('renders correctly with props', () => {
    const wrapper = mount(ComponentName, {
      props: {
        // 测试props
      }
    })
    
    expect(wrapper.text()).toContain('expected text')
  })
  
  it('emits event when button is clicked', async () => {
    const wrapper = mount(ComponentName)
    await wrapper.find('button').trigger('click')
    
    expect(wrapper.emitted()).toHaveProperty('eventName')
  })
})
```

### 测试场景
1. **渲染测试**: [描述]
2. **交互测试**: [描述]
3. **状态测试**: [描述]

### 测试状态
- [通过/失败/未执行]

### 备注
- [其他需要说明的信息]
```

## 6. 非功能测试用例模板

### 6.1 性能测试用例模板

```markdown
## 测试用例ID: [ID]

### 基本信息
- **标题**: [性能测试标题]
- **模块**: [所属模块]
- **优先级**: [高/中/低]
- **创建日期**: [YYYY-MM-DD]
- **最后更新**: [YYYY-MM-DD]
- **测试人员**: [姓名]

### 测试目的
[描述性能测试的目标和要验证的性能指标]

### 测试环境
- **设备**: [设备型号/配置]
- **浏览器**: [浏览器及版本]
- **网络**: [网络环境]

### 性能指标
| 指标名称 | 目标值 | 实际值 | 状态 |
|---------|-------|-------|------|
| 页面加载时间 | <2秒 | - | - |
| 首次内容绘制 | <1秒 | - | - |
| 交互响应时间 | <100ms | - | - |

### 测试步骤
1. [步骤1详细描述]
2. [步骤2详细描述]
3. ...

### 测试结果
[详细记录测试结果和数据分析]

### 测试状态
- [通过/失败/未执行]

### 备注
- [其他需要说明的信息]
```

### 6.2 兼容性测试用例模板

```markdown
## 测试用例ID: [ID]

### 基本信息
- **标题**: [兼容性测试标题]
- **模块**: [所属模块]
- **优先级**: [高/中/低]
- **创建日期**: [YYYY-MM-DD]
- **最后更新**: [YYYY-MM-DD]
- **测试人员**: [姓名]

### 测试目的
[描述兼容性测试的目标和要验证的兼容性范围]

### 测试矩阵

#### 6.2.1 浏览器兼容性测试矩阵

| 浏览器 | 版本 | 操作系统 | 状态 | 备注 |
|--------|------|----------|------|------|
| Chrome | 最新2个版本 | Windows 10 | - | - |
| Firefox | 最新2个版本 | Windows 10 | - | - |
| Safari | 最新2个版本 | macOS | - | - |
| Edge | 最新2个版本 | Windows 10 | - | - |
| Chrome | 最新2个版本 | Android | - | - |
| Safari | 最新2个版本 | iOS | - | - |

#### 6.2.2 分辨率兼容性测试矩阵

| 分辨率 | 设备类型 | 状态 | 备注 |
|--------|----------|------|------|
| 1920x1080 | 桌面 | - | - |
| 1366x768 | 笔记本 | - | - |
| 1024x768 | 平板/老旧显示器 | - | - |
| 375x667 | iPhone | - | - |
| 390x844 | iPhone 12+ | - | - |
| 1080x1920 | Android手机 | - | - |

### 测试步骤
1. [步骤1详细描述]
2. [步骤2详细描述]
3. ...

### 测试结果
[详细记录各环境下的测试结果]

### 测试状态
- [通过/失败/未执行]

### 备注
- [其他需要说明的信息]
```

## 7. 测试用例编写最佳实践

### 7.1 功能测试最佳实践

1. **清晰明确的标题**: 测试标题应简洁明了，直接反映测试内容
2. **完整的前置条件**: 详细列出执行测试前必须满足的条件
3. **详细的测试步骤**: 测试步骤应足够详细，便于任何人执行
4. **明确的预期结果**: 预期结果应具体、可验证，避免模糊描述
5. **边界值测试**: 包含边界值和异常输入的测试用例
6. **独立的测试用例**: 每个测试用例应独立，不依赖其他测试用例的执行结果
7. **可重复性**: 测试用例应可重复执行，结果一致

### 7.2 单元测试最佳实践

1. **单一职责原则**: 每个测试应只测试一个功能点
2. **隔离测试**: 测试应隔离被测单元，模拟其依赖
3. **测试命名规范**: 测试名称应描述测试的行为和预期结果
4. **覆盖率优先**: 优先测试核心业务逻辑和复杂功能
5. **速度优先**: 单元测试应快速执行，不依赖外部资源
6. **断言简洁**: 每个测试中的断言应简洁明确

### 7.3 组件测试最佳实践

1. **组件隔离**: 使用Vue Test Utils隔离测试组件
2. **模拟依赖**: 模拟组件的props、events和依赖
3. **DOM交互测试**: 模拟用户交互，测试组件响应
4. **状态变化测试**: 测试组件在不同状态下的渲染
5. **快照测试**: 对关键UI渲染进行快照测试

## 8. 测试用例维护规范

### 8.1 测试用例更新

1. **需求变更时**: 当需求发生变更，对应的测试用例必须同步更新
2. **代码修改后**: 当被测试代码修改后，应评估并更新相关测试用例
3. **定期审查**: 每季度对测试用例进行一次审查，移除过时或冗余的用例

### 8.2 测试用例版本控制

1. **版本号**: 测试用例文档应包含版本号和更新日期
2. **变更记录**: 记录测试用例的主要变更内容
3. **变更审批**: 重要测试用例变更应经过评审和审批

## 9. 附录

### 9.1 常用断言指南
### 9.2 测试数据准备指南
### 9.3 测试用例管理工具使用指南

---

**文档版本**: 1.0.0
**创建日期**: 2023年7月1日
**最后更新**: 2023年7月1日
**文档状态**: 初稿

---